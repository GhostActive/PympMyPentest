from abc import abstractmethod, ABC
from typing import Any, Iterable


class Collector(ABC):
    """

    """

    @abstractmethod
    def accept(self, obj: Any) -> bool:
        """

        """
        return True

    @abstractmethod
    def modify(self, obj: Any) -> Any:
        """

        """
        return obj

    @abstractmethod
    def supply(self, iterable) -> Any:
        """

        """
        return iterable

    def collect(self, *args, **kwargs) -> Iterable[Any]:
        """

        """
        return (self.modify(obj) for obj in self.supply(*args, **kwargs) if self.accept(obj))


class Pipeline(ABC):
    """

    """

    @abstractmethod
    def pipeline(self, *args, **kwargs):
        """

        """
        return True

    def build(self, *args, **kwargs):
        """

        """
        return self.pipeline(*args, **kwargs)
